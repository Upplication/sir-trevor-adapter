var SirTrevorAdapter=function(t){function e(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var a={elementEnclosingTag:"div",elementClass:"st-render",addElementTypeClass:!0,containerClass:"st-render-container",attrName:"st",attrType:"st-type"},n=function(t,e){var n={config:Object.assign({},a,t||{}),adapters:e||[r(1),r(2),r(3),r(4),r(5),r(6),r(7),r(8)],initialize:function(){var t=this;return this.adapters.forEach(function(e){e.initialize instanceof Function&&e.initialize(t)}),t},isSirTrevorData:function(t){return!!(t&&t.type&&t.data&&_.isObject(t.data)&&_.isString(t.type))},getAdapterFor:function(t){if(!t)return null;var e=t.type||t;return this.adapters.reduce(function(t,r){return t?t:r.handles.indexOf(e)>=0?r:null},null)},toHTML:function(t){var e=!0;_.isArray(t)||(t=[t],e=!1);var r=this,a=function(t){if(!r.isSirTrevorData(t))throw Error("No valid SirTrevorData "+t);var e=r.getAdapterFor(t);if(!e)throw Error("No handler for "+t.type);var a=$("<div>"),n=$("<"+r.config.elementEnclosingTag+">");return n.addClass(r.config.elementClass),r.config.addElementTypeClass&&n.addClass(r.config.elementClass+"-"+t.type),n.html(e.toHTML(t.data,t.type)),n.attr("data-"+r.config.attrType,t.type),a.append(n),a.html()},n=t.map(a);return e?'<div class="'+r.config.containerClass+'">'+n.join(" ")+"</div>":n.pop()},toJSON:function(t){var e=this,r=$(t);return r.find("."+this.config.elementClass).map(function(r,a){var n=$(a),o=n.data(e.config.attrName);if(o)return o;var i=n.data(e.config.attrType);if(!i)throw Error("No data-"+e.config.attrType+" tag found on: "+t);var s=e.getAdapterFor(i);if(!s)throw Error("No handler for "+i);return{type:i,data:s.toJSON(n.html(),i)}}).get()}};return n.initialize()};n.ButtonAdapter=r(1),n.ImageAdapter=r(3),n.ListAdapter=r(4),n.MapAdapter=r(5),n.SpacerAdapter=r(6),n.TextAdapter=r(7),n.VideoAdapter=r(8),n.ColumnsAdapter=r(2),t.exports=n},function(t,e){ButtonAdapter={name:"ButtonAdapter",handles:["button"],toHTML:function(t){var e=$("<div>"),r=$("<a>").appendTo(e);return $("<div>",{style:"clear: both"}).appendTo(e),r.html(t.text),t.href&&t.href.length>0&&r.attr("href",t.href),r.attr("data-st-user-href",t["user-href"]),r.attr("style","overflow: hidden; display: block; line-height: normal; box-sizing: border-box; border-style: solid; text-align: center; margin: 0 auto;"),r.find("> *").css("margin","0"),Object.keys(t).forEach(function(e){if(/^css\-/.test(e)){var a=e.replace(/^css-/,""),n=t[e];r.attr("style",r.attr("style")+a+":"+n+";")}}),e.html()},toJSON:function(t){var e=$(t),r={};return r.format="html",r.text=e.html(),r.href=e.attr("href"),r["user-href"]=e.attr("data-st-user-href"),e.attr("style").split(";").filter(function(t){return-1!=t.indexOf(":")}).forEach(function(t){var e=t.split(":"),a=e[0].replace(/\s/g,""),n=e[1].trim();r["css-"+a]=n}),r}},t.exports=ButtonAdapter},function(t,e,r){ColumnsAdapter={name:"ColumnsAdapter",handles:["columns"],_getAdapter:function(){if(!this._adapter){var t=r(!function(){var t=new Error('Cannot find module "../index"');throw t.code="MODULE_NOT_FOUND",t}());this._adapter=t({elementClass:"st-row",containerClass:"st-column"})}return this._adapter},toHTML:function(t){var e=this._getAdapter(),r=$("<div>");return t.columns.map(function(t){var a=e.toHTML(t.blocks),n=$(a);n.attr("data-"+e.config.containerClass+"-width",t.width),r.append(n)}),r.html()},toJSON:function(t){var e=this._getAdapter(),r=$("<div>"+t+"</div>"),a={columns:[],preset:"columns-"};return r.find("."+e.config.containerClass).each(function(t,r){var n=$("<div>"),o=$(r);n.append(o);var i={blocks:e.toJSON(n.html()),width:o.data(e.config.containerClass+"-width")};a.columns.push(i)}),a.preset+=a.columns.map(function(t){return t.width}).join("-"),a}},t.exports=ColumnsAdapter},function(t,e){ImageAdapter={name:"ImageAdapter",handles:["image","image_edit"],toHTML:function(t){if(!t||!t.file)return"";var e=t.file.url||"",r=t.href,a='<img src="'+e+'"/>';return r&&r.length>0?'<a href="'+r+'">'+a+"</a>":a},toJSON:function(t){var e="",r=/<img src="(.*?)"\/?>/,a=r.exec(t);a&&(e=a[1]);var n=null,o=/<a href="(.*?)">/,i=o.exec(t);return i&&(n=i[1]),{href:n,file:{url:e}}}},t.exports=ImageAdapter},function(t,e){ListAdapter={name:"ListAdapter",handles:["list"],toHTML:function(t){return t.listItems.reduce(function(t,e){t+="<li>"+e.content+"</li>"},"<ul>")+"</ul>"},toJSON:function(t){for(var e,r=/<li>(.*)<\/li>/,a=[];null!==(e=r.exec(t));)a.push({content:e[1]});return{listItems:a}}},t.exports=ListAdapter},function(t,e){MapAdapter={name:"MapAdapter",handles:["map"],toHTML:function(t){var e=_.template("https://maps.googleapis.com/maps/api/staticmap?size=<%= width %>x<%= height %>&center=<%= address %>&markers=|<%= address %>&zoom=<%= zoom %>&scale=2",t),r=_.template("http://maps.google.com/maps?q=<%= address %>",t),a='<a href="<%= map_ref %>"><img src="<%= img_src %>" /></a>';return _.template(a,{img_src:e,map_ref:r})},toJSON:function(t){var e=/center=(.*?)&.*zoom=([0-9]+)&.*scale=([0-9]+)/,r=e.exec(t);return r?{address:r[1],zoom:r[2],scale:r[3]}:{}}},t.exports=MapAdapter},function(t,e){SpacerAdapter={name:"SpacerAdapter",handles:["spacer"],toHTML:function(t){return _.template('<div style="margin:<%= height %><%= units %> 0;"></div',t)},toJSON:function(t){var e=/margin:\s*([0-9\.]+)([a-z%]+)\s*0/,r=e.exec(t);return r?{height:Number(r[1].trim()),units:r[2].trim()}:{}}},t.exports=SpacerAdapter},function(t,e){TextAdapter={name:"TextAdapter",handles:["text","heading","ck_editor","quote","widget"],tags:{heading:"h2",quote:"quote"},toHTML:function(t,e){if("html"==t.format){var r=t.text,a=this.tags[e];return a&&(r="<"+a+">"+r+"</"+a+">"),r}return console.error("Invalid type "+t.format+" for block type "+e),""},toJSON:function(t,e){var r=this.tags[e];return r&&(t=t.replace(new RegExp("^<"+r+">"),"").replace(new RegExp("</"+r+">$"),"")),{text:t,format:"html"}}},t.exports=TextAdapter},function(t,e){VideoAdapter={name:"VideoAdapter",handles:["video"],providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'},vine:{regex:/(?:http[s]?:\/\/)?(?:www.)?vine.co\/v\/([^\W]*)/,html:'<iframe class="vine-embed" src="<%= protocol %>//vine.co/v/<%= remote_id %>/embed/simple" width="<%= width %>" height="<%= width %>" frameborder="0"></iframe><script async src="http://platform.vine.co/static/scripts/embed.js" charset="utf-8"></script>',square:!0},dailymotion:{regex:/(?:http[s]?:\/\/)?(?:www.)?dai(?:.ly|lymotion.com\/video)\/([^\W_]*)/,html:'<iframe src="<%= protocol %>//www.dailymotion.com/embed/video/<%= remote_id %>" width="580" height="320" frameborder="0"></iframe>'}},toHTML:function(t){if(!this.providers.hasOwnProperty(t.source))return"";var e=this.providers[t.source],r="file:"===window.location.protocol?"http:":window.location.protocol;return _.template(e.html,{protocol:r,remote_id:t.remote_id})},toJSON:function(t){var e=/<iframe src="(.*?)"/.exec(t);if(!e||!e[1])return{};var r=e[1],a=this;return Object.keys(this.providers).reduce(function(t,e){if(!_.isEmpty(t))return t;var n=a.providers[e],o=n.regex.exec(r);return o&&o[1]?{source:e,remote_id:o[1]}:t},{})}},t.exports=VideoAdapter}]);