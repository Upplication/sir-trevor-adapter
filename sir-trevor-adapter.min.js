!function(e){var t=window,r=t.$||t.jQuery,o=t._||t.lodash;if(!r)throw new Error("SirTrevorAdapter requires jQuery");if(!o)throw new Error("SirTrevorAdapter requires lodash");t.SirTrevorAdapter=e(r,o)}(function(e,t){"use strict";var r={text:"<%= text %>",quote:"<quote><%= text %></quote>",image:'<div><img src="<%- file.url %></div>',"image-edit":'<div><img src="<%- file.url %></div>',heading:"<h2><%= text %></h2>",list:"<ul><% _.each(listItems, function(e) { %><li><%- e.content %></li><% }) %></ul>",tweet:"<div></div>",button:"<%= text %>",widget:"<%= text %>",video:function(e){var r={vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}};if(!r.hasOwnProperty(e.source))return"";var o=r[e.source],i="file:"===window.location.protocol?"http:":window.location.protocol;return t.template(o.html,{protocol:i,remote_id:e.remote_id})}},o={elementEnclosingTag:"div",elementClass:"st-render",addElementTypeClass:!0,attrName:"st"},i=function(e){e=e||{},this.templates=t.defaults(e.templates||{},r),delete e.template,this.config=t.defaults(o,e)};return i.prototype._isSirTrevorData=function(e){return e&&e.type&&e.data&&t.isObject(e.data)},i.prototype.renderType=function(e,r){var o=this.templates[e];return o?t.isFunction(o)?o(r):t.template(o,r):(console.error("No template for type "+e),"")},i.prototype.map=function(t){if(!this._isSirTrevorData(t))return console.error(JSON.stringify(t)+" is not a valid SirTrevor object"),"";var r=this.renderType(t.type,t.data),o=[this.config.elementClass];this.config.addElementTypeClass&&o.push(this.config.elementClass+"-"+t.type);var i=e("<"+this.config.elementEnclosingTag+">",{"class":o.join(" ")});return i.attr("data-"+this.config.attrName,JSON.stringify(t)),i.html(r),i[0].outerHTML},i.prototype.toHTML=function(r){t.isArray(r)||(r=[r]);e("<"+this.config.elementEnclosingTag+">",{"class":this.config.elementClass+"-container"});return'<div class="st-render-container">'+r.map(this.map,this).join("\n")+"</div>"},i.prototype.fromJSON=i.prototype.toHTML,i.prototype.toJSON=function(t){var r=this,o=e(t),i=e(o),n=[];return i.find(".st-render").each(function(t,o){n.push(e(o).data(r.config.attrName))}),n},i.prototype.fromHTML=i.prototype.toJSON,i.Defaults={},i.Defaults.Templates=r,i});